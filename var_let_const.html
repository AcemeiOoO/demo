<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="icon" type="image/x-icon" href="sort.png">
</head>
<body>

    <script type="text/javascript">
        /*
            直接写在head里的文字也会显示
            先var或const再let或是反过来都会报错
        */
        const web = 'html'
    </script>
    <script src="build.js"></script>

    <script type="text/javascript">
        let r = res.map(item => {
            return {
                title: item.name,
                sex: item.sex === 1? '男':item.sex === 0?'女':'保密',
                age: item.age,
                avatar: item.img
            }
        })

        // 也可以省略 return：
        const users=res.items.map(item => ({
            url: item.html_url,      
            img: item.avatar_url,      
            name: item.login,
            })
        );
    </script>

    <script type="text/javascript">
        // 1、请求的同步异步 async是一种表明异步的声明，写不写都行，最好写上
        async function test() {
            /*
                await会自动把普通类型的返回值包装成promise类型
                axios请求返回的是一个promise类型，Ajax有新语法也可返回promise类型
            */
            var data = await http().then(data=>{
                return 1
            })
            await http()
            await http()
        }

        // 2、手写promise
        console.log(1);
        new Promise((resolve,reject)=>{
            console.log(2);
            resolve
        }).then(data=>{
            console.log(4);
        })
        console.log(3);

        class Promise{
            constructor(execute){
                var self = this;
                function resolve(data){
                    setTimeout(()=>{
                        self.onResolve(data);
                    })
                }

                function reject(err) {
                    
                }

                execute(resolve,reject);
            }

            then(callback){
                this.onResolve = callback;
            }
        }

        // 3、浏览器事件循环
        console.log(1);
        console.log(2);
        setTimeout(()=>{
            console.log(4);
        })
        console.log(3);

        //正常的代码
        while(true){
            // 1、查找宏任务队列   （settimeout、事件函数、请求）

            // 2、raf

            // 3、微任务队列
        }

        // 事件队列
        queue:[]
        animationQueue:[]
        requestAnimationFrame:[]

    </script>
</body>
</html>